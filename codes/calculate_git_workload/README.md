# calculate_git_workload

## 概要

このスクリプトは、Gitリポジトリのコミット履歴から各コミッターの作業量（コミット数、追加行数、削除行数、変更ファイル数）を集計・表示します。  
マージコミットは除外され、純粋な作業量を確認できます。

## 使い方

1. Python3がインストールされていることを確認してください。
2. このスクリプトをGitリポジトリ直下、またはリポジトリ内で実行してください。

### 実行コマンド例

#### 全期間の集計

```sh
python3 main.py
```

#### 過去7日間の集計

```sh
python3 main.py -d 7
```

#### JSON形式で出力

```sh
python3 main.py -t json
```

#### ファイルをダウンロードせずにワンライナーで実行（例: GitHubのraw URLを使う場合）

```sh
curl -s https://raw.githubusercontent.com/t2nagi/code-misc/refs/heads/main/codes/calculate_git_workload/main.py | python3 -
```

## コマンドラインオプション一覧

| オプション         | 説明                                   | 例                      |
|--------------------|----------------------------------------|-------------------------|
| `-d`, `--days`     | 何日前までの履歴を集計するか           | `-d 30`                 |
| `-t`, `--type`     | 出力形式（`table` または `json`）      | `-t json`               |
| `-h`, `--help`     | ヘルプ表示                             | `-h`                    |

## 出力例

```
Gitコミット履歴から作業量を算出中...

--- 各コミッターの作業量 ---
コミッター                        |   コミット数 |    追加行数 |    削除行数 | 変更ファイル数 | 合計変更行数
----------------------------------------------------------------------------------------------------
Alice                            |         120 |       3500 |       2100 |          400 |         5600
Bob                              |          80 |       2000 |       1500 |          250 |         3500
...
```

### JSON出力例

```json
[
  {
    "コミッター": "Alice",
    "コミット数": 120,
    "追加行数": 3500,
    "削除行数": 2100,
    "変更ファイル数": 400,
    "合計変更行数": 5600
  },
  {
    "コミッター": "Bob",
    "コミット数": 80,
    "追加行数": 2000,
    "削除行数": 1500,
    "変更ファイル数": 250,
    "合計変更行数": 3500
  }
]
```

## 補足

- バイナリファイルの変更は行数にカウントされません。
- エラーが発生した場合は、Gitのインストールやパス設定を確認してください。
- マージコミットは自動的に除外されます。
